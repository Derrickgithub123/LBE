(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6122b17d"],{"02a6":function(e,t,r){},"1e5a":function(e,t,r){"use strict";var i=r("23e7"),s=r("9961"),o=r("dad2");i({target:"Set",proto:!0,real:!0,forced:!o("symmetricDifference")},{symmetricDifference:s})},"1e70":function(e,t,r){"use strict";var i=r("23e7"),s=r("a5f7"),o=r("dad2");i({target:"Set",proto:!0,real:!0,forced:!o("difference")},{difference:s})},"22b2":function(e,t,r){"use strict";var i=function(){var e=this,t=e._self._c;return t("section",[t("v-snackbar",{style:{opacity:e.snackbar.opacity},attrs:{color:e.snackbar.color,timeout:e.snackbar.timeout,bottom:e.snackbar.bottom,top:e.snackbar.top,centered:e.snackbar.centered,left:e.snackbar.left,right:e.snackbar.right,vertical:e.snackbar.vertical,"multi-line":e.snackbar.multiline},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[t("span",{class:e.snackbar.textcolor+"--text"},[e._v(e._s(e.snackbar.content))]),e.snackbar.action?t("v-btn",{attrs:{text:"",color:"yellow"},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("VIEW")]):e._e(),e.snackbar.loader?t("v-progress-circular",{attrs:{size:20,indeterminate:"",color:"primary"}}):e._e()],1)],1)},s=[],o={data(){return{snackbar:{visible:!1,content:null,route:null,color:void 0,textcolor:"white",loader:!1,timeout:-1,action:!1,right:!0,left:!1,centered:!1,bottom:!0,top:!1,vertical:!1,multiline:!1,opacity:.6}}},methods:{Snackify(e){this.snackbar={...this.snackbar,...e}}}},a=o,n=r("2877"),c=Object(n["a"])(a,i,s,!1,null,null,null);t["a"]=c.exports},"2a62":function(e,t,r){"use strict";var i=r("c65b"),s=r("825a"),o=r("dc4a");e.exports=function(e,t,r){var a,n;s(e);try{if(a=o(e,"return"),!a){if("throw"===t)throw r;return r}a=i(a,e)}catch(c){n=!0,a=c}if("throw"===t)throw r;if(n)throw a;return s(a),r}},"384f":function(e,t,r){"use strict";var i=r("e330"),s=r("5388"),o=r("cb27"),a=o.Set,n=o.proto,c=i(n.forEach),l=i(n.keys),d=l(new a).next;e.exports=function(e,t,r){return r?s({iterator:l(e),next:d},t):c(e,t)}},"395e":function(e,t,r){"use strict";var i=r("dc19"),s=r("cb27").has,o=r("8e16"),a=r("7f65"),n=r("5388"),c=r("2a62");e.exports=function(e){var t=i(this),r=a(e);if(o(t)<r.size)return!1;var l=r.getIterator();return!1!==n(l,(function(e){if(!s(t,e))return c(l,"normal",!1)}))}},"46c4":function(e,t,r){"use strict";e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},"4f1f":function(e,t,r){"use strict";var i=function(){var e=this,t=e._self._c;return t("v-row",{attrs:{justify:"center"}},[t("v-dialog",{attrs:{persistent:"","max-width":"751"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("v-card",{staticClass:"rounded-lg",staticStyle:{"overflow-wrap":"unset !important"}},[t("v-toolbar",{attrs:{elevation:"0"}},[t("v-toolbar-title",{staticStyle:{"padding-left":"10px !important"}},[e._v("Feedback")]),t("v-spacer"),t("span",{staticClass:"body-2"},[e._v("Close")]),t("v-icon",{attrs:{size:"20"},on:{click:function(t){return e.closeDialog()}}},[e._v("mdi-close")])],1),t("v-divider"),t("v-card-title",{staticStyle:{"word-break":"unset !important"}},[e._v("Tell us more about your experience")]),t("v-card-text",{staticStyle:{padding:"0 24px"}},[t("p",{staticStyle:{"font-weight":"400","font-size":"12px","line-height":"14px",color:"#2f2d2d"}},[e._v(" We value your feedback. Kindly fill in this short survey on your experience. ")]),t("ol",[t("li",{staticStyle:{"font-weight":"400","font-size":"12px","line-height":"14px",color:"#2f2d2d","word-break":"unset !important"}},[e._v(" How likely are you to recommend the Daraja Developer Platform to a friend, family member or colleague? "),t("br"),t("br"),e._v(" Please answer on a scale of 0 to 10, where 0 means unlikely to recommend and 10 means very likely to recommend. ")]),t("v-icon",{staticStyle:{"font-style":"normal"},attrs:{size:"10"}},[e._v(" 👎 Bad ")]),t("v-row",{staticStyle:{margin:"-10px 4px 0px -10px"},model:{value:e.selectedScore,callback:function(t){e.selectedScore=t},expression:"selectedScore"}},e._l(e.items,(function(r,i){return t("v-col",{key:i,staticStyle:{"flex-grow":"0"}},[t("v-card",{style:{padding:"10px",cursor:"pointer",width:"38px",height:"30px",borderRadius:"5px",border:e.selectedScore===i?"solid 2px "+r.color:"solid 2px #A7A9AC",backgroundColor:e.selectedScore===i?r.color:"white !important",color:e.selectedScore===i?"white !important":"black !important",fontSize:"14px",display:"flex",justifyContent:"center",alignItems:"center"},attrs:{elevation:"0"},on:{click:function(t){return e.selectScore(i)}}},[e._v(" "+e._s(i)+" ")]),10==i?t("div",[t("v-icon",{staticStyle:{"font-style":"normal"},attrs:{size:"10"}},[e._v("👍 Good")])],1):e._e()],1)})),1),t("li",{staticStyle:{"font-weight":"400","font-size":"12px","line-height":"14px",color:"#2f2d2d","word-break":"unset !important"}},[e._v(" Why did you give the score above? ")]),t("v-col",{staticStyle:{"padding-bottom":"0px"},attrs:{cols:"12"}},[t("v-textarea",{attrs:{outlined:"",rows:"2","auto-grow":""},model:{value:e.scoreReason,callback:function(t){e.scoreReason=t},expression:"scoreReason"}})],1)],1)]),t("v-card-actions",{staticStyle:{"padding-top":"0px","padding-bottom":"20px"}},[t("v-btn",{staticClass:"mx-auto",attrs:{color:"primary",disabled:null==e.selectedScore,loading:e.loading,rounded:"","min-width":e.$vuetify.breakpoint.smAndDown?"100px":"300px"},on:{click:function(t){return e.submitScore()}}},[e._v("Submit")])],1)],1)],1),t("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:e.successDialog,callback:function(t){e.successDialog=t},expression:"successDialog"}},[t("v-card",{staticClass:"rounded-lg text-center"},[t("v-icon",{staticStyle:{"margin-top":"10px"},attrs:{color:"#43B02A",size:"60px"}},[e._v(" mdi-check-circle-outline ")]),t("v-card-text",[t("p",{staticStyle:{"font-weight":"400","font-size":"15px",color:"#2cb34a","margin-top":"10px","word-break":"unset !important"}},[e._v(" SURVEY COMPLETE ")]),t("span",{staticStyle:{"font-weight":"500",color:"#424242","font-size":"12px","word-break":"unset !important"}},[e._v(" You have completed the survey")]),t("br"),t("span",{staticStyle:{"font-weight":"500",color:"#424242","font-size":"12px"}},[e._v(" Thank you for your time ")])]),t("v-card-actions",{staticStyle:{"padding-top":"0px","padding-bottom":"20px"}},[t("v-btn",{staticClass:"mx-auto",attrs:{color:"primary",rounded:"","min-width":e.$vuetify.breakpoint.smAndDown?"":"120px"},on:{click:function(t){return e.closeServey()}}},[e._v("Done")])],1)],1)],1),t("Alert",{ref:"Alert"})],1)},s=[],o=r("9b67"),a={props:["serviceName","journey","serveySubmitted"],components:{Alert:o["a"]},data(){return{dialog:!0,successDialog:!1,selectedScore:null,scoreReason:null,items:[{score:0,color:"#B72224"},{score:1,color:"#D52029"},{score:2,color:"#E95223"},{score:3,color:"#EA6F22"},{score:4,color:"#F6A726"},{score:5,color:"#FDC729"},{score:6,color:"#EBDB0A"},{score:7,color:"#E5E044"},{score:8,color:"#C2D234"},{score:9,color:"#AEC93C"},{score:10,color:"#66B44E"}],loading:!1}},methods:{selectScore(e){this.selectedScore=e},isSelected(e){return this.selectedScore===e},closeDialog(){this.dialog=!1,this.selectedScore=null,this.scoreReason=null,this.$emit("serveySubmitted",!0)},submitScore(){this.loading=!0,this.successDialog=!1,this.promiseFetch(this.$store.getters.fetchTimeout)(fetch(this.$store.getters.endpoint+"NPS/CompleteFeedback/",{method:"post",body:JSON.stringify({token:this.$store.getters.token,serviceName:this.serviceName,score:this.selectedScore,feedbackText:this.scoreReason,journey:this.journey,sourceChannel:"Daraja WEB"})})).then(e=>{e.text().then(t=>{200==e.status?(this.dialog=!1,this.selectedScore=null,this.scoreReason=null,this.successDialog=!0,this.dialog=!1):this.$refs.Alert.Alertify({visible:!0,content:JSON.parse(t).status,title:JSON.parse(t).title,icon:"mdi-alert",color:"error"})})}).catch(()=>{this.$refs.Alert.Alertify({visible:!0,content:this.$store.getters.fetchTimeoutError,title:"Connection Timeout",icon:"mdi-wifi-strength-1-alert",color:"error"})}).finally(()=>{this.loading=!1})},closeServey(){this.successDialog=!1,this.$emit("serveySubmitted",!0)}}},n=a,c=(r("9392"),r("2877")),l=Object(c["a"])(n,i,s,!1,null,null,null);t["a"]=l.exports},5388:function(e,t,r){"use strict";var i=r("c65b");e.exports=function(e,t,r){var s,o,a=r?e:e.iterator,n=e.next;while(!(s=i(n,a)).done)if(o=t(s.value),void 0!==o)return o}},"5a99":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e._self._c;return t("v-main",{staticStyle:{height:"calc(100vh - 112px) !important"}},[t("v-container",{class:e.$vuetify.breakpoint.mdAndUp&&"pt-3 px-12",attrs:{fluid:""}},[t("v-row",{attrs:{justify:"center"}},[t("v-col",{attrs:{cols:"12",sm:"8"}},[t("v-card",{staticClass:"rounded-xl pr-8",staticStyle:{"border-top":"5px solid #39b54a"},attrs:{disabled:e.isFreeze}},[t("v-stepper",{staticStyle:{"margin-right":"-32px"},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[t("v-stepper-header",[t("v-stepper-step",{attrs:{complete:e.step>1,step:"1"}},[e._v(" Organization Information "),t("small",{directives:[{name:"show",rawName:"v-show",value:e.GoLiveProcess.checkingDuplicate||e.GoLiveProcess.gettingProduct||e.GoLiveProcess.sendingOTP,expression:"\n                    GoLiveProcess.checkingDuplicate ||\n                      GoLiveProcess.gettingProduct ||\n                      GoLiveProcess.sendingOTP\n                  "}],staticClass:"caption"},[t("v-progress-circular",{attrs:{indeterminate:"",color:"green"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.GoLiveProcess.checkingDuplicate&&!e.GoLiveProcess.gettingProduct&&!e.GoLiveProcess.sendingOTP,expression:"\n                      !GoLiveProcess.checkingDuplicate &&\n                        !GoLiveProcess.gettingProduct &&\n                        !GoLiveProcess.sendingOTP\n                    "}]},[e._v("Verification of Organization Information")]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.GoLiveProcess.checkingDuplicate,expression:"GoLiveProcess.checkingDuplicate"}]},[e._v(" Checking for app duplicates... ")]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.GoLiveProcess.gettingProduct,expression:"GoLiveProcess.gettingProduct"}]},[e._v(" Getting app products... ")]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.GoLiveProcess.sendingOTP,expression:"GoLiveProcess.sendingOTP"}]},[e._v(" Sending OTP... ")])],1)]),t("v-divider"),t("v-stepper-step",{attrs:{complete:e.step>2,step:"2"}},[e._v(" Going Live "),t("small",{directives:[{name:"show",rawName:"v-show",value:!e.GoLiveProcess.OldGoLive&&!e.GoLiveProcess.CreateMerchant,expression:"\n                    !GoLiveProcess.OldGoLive && !GoLiveProcess.CreateMerchant\n                  "}],staticClass:"caption"},[e._v(" Enter the One Time PIN received and select at least one API product ")]),t("small",{directives:[{name:"show",rawName:"v-show",value:e.GoLiveProcess.OldGoLive||e.GoLiveProcess.CreateMerchant,expression:"\n                    GoLiveProcess.OldGoLive || GoLiveProcess.CreateMerchant\n                  "}],staticClass:"caption"},[t("v-progress-circular",{attrs:{indeterminate:"",color:"green"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:e.GoLiveProcess.OldGoLive,expression:"GoLiveProcess.OldGoLive"}]},[e._v(" Going Live... ")]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.GoLiveProcess.CreateMerchant,expression:"GoLiveProcess.CreateMerchant"}]},[e._v(" Creating merchant... ")])],1)])],1),t("v-stepper-content",{attrs:{step:"1"}},[t("v-card",{staticClass:"pt-1",attrs:{flat:""}},[t("v-form",{staticClass:"CustomFormModifier",model:{value:e.ShortCodeVerification.valid,callback:function(t){e.$set(e.ShortCodeVerification,"valid",t)},expression:"ShortCodeVerification.valid"}},[t("v-row",[t("v-col",{attrs:{cols:"12",sm:"6"}},[t("v-select",{attrs:{items:e.VerificationTypes,label:"Verification Type *","prepend-inner-icon":"mdi-account-card-details",outlined:"",dense:""},model:{value:e.ShortCodeVerification.VerificationType,callback:function(t){e.$set(e.ShortCodeVerification,"VerificationType",t)},expression:"ShortCodeVerification.VerificationType"}})],1),"Short Code"===e.ShortCodeVerification.VerificationType?t("v-col",{attrs:{cols:"12",sm:"6"}},[t("v-text-field",{attrs:{rules:[e.validators.required,e.validators.NumericsRegex],label:"Organization Short Code *",name:"OrganizationShortCode","prepend-inner-icon":"mdi-powershell",hint:"Enter Business Shortcode (Store number/Head office/Paybill/B2C).","persistent-hint":"",outlined:"",dense:""},model:{value:e.ShortCodeVerification.OrganizationShortCode,callback:function(t){e.$set(e.ShortCodeVerification,"OrganizationShortCode",t)},expression:"ShortCodeVerification.OrganizationShortCode"}})],1):e._e(),"Pinless Dealer"===e.ShortCodeVerification.VerificationType?t("v-col",{attrs:{cols:"12",sm:"6"}},[t("v-text-field",{attrs:{rules:[e.validators.required],label:"Pinless Dealer Code *",name:"PinlessDealerCode","prepend-inner-icon":"mdi-powershell",hint:"Your Pinless Dealer Code","persistent-hint":"",outlined:"",dense:""},model:{value:e.PinlessVerification.PinlessDealerCode,callback:function(t){e.$set(e.PinlessVerification,"PinlessDealerCode",t)},expression:"PinlessVerification.PinlessDealerCode"}})],1):e._e()],1),t("v-row",{staticClass:"mt-3"},[t("v-col",{attrs:{cols:"12",sm:"6"}},[t("v-text-field",{attrs:{rules:[e.validators.required,e.validators.AlphanumericsAndSpacesRegex,e.validators.OrgName],label:"Organization Name *",name:"OrganizationName","prepend-inner-icon":"mdi-domain",hint:"Name of your organization or company","persistent-hint":"",outlined:"",dense:""},model:{value:e.ShortCodeVerification.OrganizationName,callback:function(t){e.$set(e.ShortCodeVerification,"OrganizationName",t)},expression:"ShortCodeVerification.OrganizationName"}})],1),t("v-col",{attrs:{cols:"12",sm:"6"}},["Pinless Dealer"===e.ShortCodeVerification.VerificationType?t("v-text-field",{attrs:{rules:[e.validators.required],label:"Dealer Username *",name:"MpesaUsername","prepend-inner-icon":"mdi-account-circle",hint:"This is the Dealer Portal username","persistent-hint":"",outlined:"",dense:""},model:{value:e.ShortCodeVerification.MpesaUsername,callback:function(t){e.$set(e.ShortCodeVerification,"MpesaUsername",t)},expression:"ShortCodeVerification.MpesaUsername"}}):t("v-text-field",{attrs:{rules:[e.validators.required],label:"M-Pesa Username *",name:"MpesaUsername","prepend-inner-icon":"mdi-account-circle",hint:"This is the username you were given to login into the M-Pesa portal","persistent-hint":"",outlined:"",dense:""},model:{value:e.ShortCodeVerification.MpesaUsername,callback:function(t){e.$set(e.ShortCodeVerification,"MpesaUsername",t)},expression:"ShortCodeVerification.MpesaUsername"}})],1)],1),t("TermsAndConditions",{ref:"TermsAndConditions"}),t("div",{staticClass:"d-flex flex-row-reverse mt-5"},[t("v-btn",{attrs:{color:"primary",disabled:!e.ShortCodeVerification.valid&&!e.PinlessVerification.valid||e.ShortCodeVerification.loading,loading:e.ShortCodeVerification.loading},on:{click:e.CheckForExistingApp}},[e._v("NEXT STEP")])],1)],1)],1)],1),t("v-stepper-content",{attrs:{step:"2"}},[t("v-card",{staticClass:"pl-3 pt-1",attrs:{flat:""}},[t("v-row",{attrs:{"no-gutters":""}},[t("v-col",{attrs:{cols:"12",md:"7"}},[t("v-form",{ref:"OTP",staticClass:"CustomFormModifier",on:{submit:function(e){e.preventDefault()}}},[t("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"######",expression:"'######'"}],attrs:{rules:[e.validators.required,e.validators.OTP],label:"OTP *","prepend-inner-icon":"mdi-powershell",outlined:"",dense:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.GoLive.apply(null,arguments)}},scopedSlots:e._u([{key:"append",fn:function(){return[t("v-btn",{staticClass:"mr-n1",staticStyle:{"margin-top":"-2px"},attrs:{small:"",color:"primary",disabled:e.OTP.loading,loading:e.OTP.loading},on:{click:e.ResendOTP}},[e._v("RESEND")])]},proxy:!0}]),model:{value:e.OTP.value,callback:function(t){e.$set(e.OTP,"value",t)},expression:"OTP.value"}})],1)],1)],1),t("div",{staticClass:"body-2 mb-3"},[e._v(" Select products to map on your app. ")]),"Short Code"===e.ShortCodeVerification.VerificationType?t("v-data-table",{staticClass:"CustomVerticalTable",attrs:{headers:e.products.headers,items:e.products.dataset,"item-key":"name","show-select":"","disable-sort":"","hide-default-footer":""},model:{value:e.products.selected,callback:function(t){e.$set(e.products,"selected",t)},expression:"products.selected"}}):e._e(),"Pinless Dealer"===e.ShortCodeVerification.VerificationType?t("v-data-table",{staticClass:"CustomVerticalTable",attrs:{headers:e.products.headers,items:e.products.pretupsdataset,"item-key":"name","show-select":"","disable-sort":"","hide-default-footer":""},model:{value:e.products.selected,callback:function(t){e.$set(e.products,"selected",t)},expression:"products.selected"}}):e._e()],1),t("div",{staticClass:"mt-5 d-flex flex-row-reverse"},[t("v-btn",{attrs:{color:"primary",disabled:e.OTP.value.length<5||e.loading||0===e.products.selected.length,loading:e.loading},on:{click:e.GoLive}},[e._v("GO LIVE!")]),t("v-btn",{attrs:{text:""},on:{click:function(t){e.step=1}}},[e._v("BACK")])],1)],1)],1)],1)],1)],1),t("Alert",{ref:"Alert",on:{click:function(t){e.showServeyTrigger?e.showServey=!0:e.showServey=!1}}}),t("Confirm",{ref:"Confirm",on:{confirm:function(t){return e.Confirm({task:!0})},cancel:function(t){return e.Confirm({task:!1})}}}),e.showServey&&e.npsEligible[e.serviceName]?t("NetPromoterScore",{attrs:{serviceName:e.serviceName,journey:e.journey},on:{serveySubmitted:e.serveySubmitted}}):e._e(),t("Snackbar",{ref:"Snackbar"})],1)],1)},s=[],o=(r("14d9"),r("1e70"),r("79a4"),r("c1a1"),r("8b00"),r("a4e7"),r("1e5a"),r("72c3"),r("d296")),a=r("22b2"),n=r("9b67"),c=r("4f1f"),l=r("4987"),d={beforeRouteEnter(e,t,r){localStorage.daraja?r():r("/")},components:{TermsAndConditions:o["a"],Snackbar:a["a"],Alert:n["a"],NetPromoterScore:c["a"],Confirm:l["a"]},data(){return{step:1,VerificationTypes:[{text:"Short Code",value:"Short Code"},{text:"Pinless Dealer",value:"Pinless Dealer"},{text:"Document ID",value:"Document ID",disabled:!0}],ShortCodeVerification:{valid:!1,loading:!1,VerificationType:"Short Code",OrganizationShortCode:null,OrganizationName:null,MpesaUsername:null,AppName:null,ConsumerSecret:null,ConsumerKey:null},PinlessVerification:{valid:!1,loading:!1,VerificationType:"Pinless Dealer",PinlessDealerCode:null,PinlessOrganizationName:null,PinlessUsername:null},OTP:{value:"",loading:!1},MSISDN:null,products:{selected:[],headers:[{text:"Name",value:"name"},{text:"Description",value:"description"}],dataset:[],pretupsdataset:[{name:"PreTUPSProduct-Production",API:"PreTUPSProduct-Production",description:"Pinless Top Up API Production"}]},loading:!1,GoLiveProcess:{checkingDuplicate:!1,gettingProduct:!1,sendingOTP:!1,OldGoLive:!1,CreateMerchant:!1},temp_products_array:[],showServey:!1,showServeyTrigger:!1,successRedirect:!1,serviceName:"Go Live",journey:"Go Live"}},mounted(){this.checkNPSEligibility(this.serviceName),this.checkBannerligibility()},methods:{Confirm(e){"show"==e.task?this.$refs.Confirm.Confirmify({visible:!0,operation:e.operation,metadata:e.metadata,content:e.content,title:e.title,icon:e.icon||"mdi-help-circle",color:e.color||"orange",truth:e.truth||"OK",falsy:e.falsy||"HIDDEN"}):e.task?(this.$refs.Confirm.Confirmify({visible:!1}),this.showServeyTrigger&&this.npsEligible[this.serviceName]?this.showServey=!0:this.successRedirect&&(this.successRedirect=!1,this.$router.push("MyApps"))):e.task||this.$refs.Confirm.Confirmify({visible:!1})},Alert(e){"show"==e.task?this.$refs.Alert.Alertify({visible:!0,content:e.content,title:e.title,icon:"mdi-progress-alert",color:"error",redirect:this.successRedirect}):e.task||(this.successRedirect=!1,this.$refs.Alert.Alertify({visible:!1}))},UpdateProgressIndicator(e,t,r){this.GoLiveProcess={checkingDuplicate:e,gettingProduct:t,sendingOTP:r}},CheckForExistingApp(){this.ShortCodeVerification.loading=!0,"Pinless Dealer"!=this.ShortCodeVerification.VerificationType?(this.UpdateProgressIndicator(!0,!1,!1),this.promiseFetch(this.$store.getters.fetchTimeout)(fetch(this.$store.getters.endpoint+"CheckForDuplicateApp/",{method:"post",body:JSON.stringify({token:this.$store.getters.token,OrganizationShortCode:this.ShortCodeVerification.OrganizationShortCode})})).then(e=>{e.text().then(t=>e.status>209||"failed"===JSON.parse(t).status?(this.UpdateProgressIndicator(!1,!1,!1),this.ShortCodeVerification.loading=!1,this.$refs.Alert.Alertify({visible:!0,content:JSON.parse(t).content,title:JSON.parse(t).title,icon:"mdi-progress-alert",color:"error"}),!1):(this.FetchShortcodeProducts(),!0))}).catch(()=>{this.$refs.Alert.Alertify({visible:!0,content:this.$store.getters.fetchTimeoutError,title:"Connection Timeout",icon:"mdi-wifi-strength-1-alert",color:"error"}),this.ShortCodeVerification.loading=!1}).finally(()=>{})):this.VerifyShortOrDealerCode()},FetchShortcodeProducts(){this.UpdateProgressIndicator(!1,!0,!1),this.promiseFetch(this.$store.getters.fetchTimeout)(fetch(this.$store.getters.endpoint+"GetProduct/",{method:"post",body:JSON.stringify({token:this.$store.getters.token,OrganizationShortCode:this.ShortCodeVerification.OrganizationShortCode,MpesaUsername:this.ShortCodeVerification.MpesaUsername})})).then(e=>{e.text().then(t=>{if(e.status>209||"failed"===JSON.parse(t).status)return this.UpdateProgressIndicator(!1,!1,!1),this.$refs.Alert.Alertify({visible:!0,content:JSON.parse(t).content,title:JSON.parse(t).title,icon:"mdi-progress-alert",color:"error"}),this.ShortCodeVerification.loading=!1,!1;let r=[];JSON.parse(t).Roles.length>0&&(r=JSON.parse(t).Roles.split(/[,]+/).map(e=>e.trim())),this.roles=r,0===this.temp_products_array.length&&(this.temp_products_array=[{name:"Lipa Na Mpesa Production",API:"Lipa na Mpesa Production",description:"STK Push And Query For Production Traffic"},{name:"C2B v2",API:"C2B v2",description:"For Customer To Business Payments. (With minimized data)."},{name:"B2C",API:"B2C",description:"Business To Customer Transactions"},{name:"Transaction Status",API:"TransactionStatus",description:"To Check The Status Of M-PESA Transaction"},{name:"Account Balance",API:"AccountBalance",description:"To Inquire Accounts Balance Of M-PESA User"},{name:"Reversal",API:"Reversal",description:"To reverse transactions"},{name:"Dynamic QRCode",API:"Dynamic QRCode",description:"Generates a dynamic QR"},{name:"Bill Manager",API:"Bill Manager - Prod",description:"One-stop end-to-end platform to send, receive, pay and reconcile all payments"},{name:"B2B",API:"B2B",description:"Business Buy Goods, Business Pay Bill & B2C Account Top Up"}]);for(let e=0;e<r.length;e++)"B2C Product"==r[e]||"B2C for API Product"==r[e]||"FSI Organizations product"==r[e]?-1===this.products.dataset.indexOf(this.temp_products_array[2])&&(this.products.dataset.push(this.temp_products_array[2]),this.products.selected.push(this.temp_products_array[2])):(-1===this.products.dataset.indexOf(this.temp_products_array[0])&&(this.products.dataset.push(this.temp_products_array[0]),this.products.selected.push(this.temp_products_array[0])),-1===this.products.dataset.indexOf(this.temp_products_array[1])&&(this.products.dataset.push(this.temp_products_array[1]),this.products.selected.push(this.temp_products_array[1])),-1===this.products.dataset.indexOf(this.temp_products_array[3])&&(this.products.dataset.push(this.temp_products_array[3]),this.products.selected.push(this.temp_products_array[3])),-1===this.products.dataset.indexOf(this.temp_products_array[4])&&(this.products.dataset.push(this.temp_products_array[4]),this.products.selected.push(this.temp_products_array[4])),-1===this.products.dataset.indexOf(this.temp_products_array[5])&&(this.products.dataset.push(this.temp_products_array[5]),this.products.selected.push(this.temp_products_array[5])),-1===this.products.dataset.indexOf(this.temp_products_array[6])&&(this.products.dataset.push(this.temp_products_array[6]),this.products.selected.push(this.temp_products_array[6])),-1===this.products.dataset.indexOf(this.temp_products_array[7])&&(this.products.dataset.push(this.temp_products_array[7]),this.products.selected.push(this.temp_products_array[7])),-1===this.products.dataset.indexOf(this.temp_products_array[8])&&(this.products.dataset.push(this.temp_products_array[8]),this.products.selected.push(this.temp_products_array[8])));return this.products.dataset=[...new Set(this.products.dataset)],this.VerifyShortOrDealerCode(),!0})}).catch(()=>{this.$refs.Alert.Alertify({visible:!0,content:this.$store.getters.fetchTimeoutError,title:"Connection Timeout",icon:"mdi-wifi-strength-1-alert",color:"error"}),this.ShortCodeVerification.loading=!1,this.UpdateProgressIndicator(!1,!1,!1)}).finally(()=>{})},VerifyShortOrDealerCode(){let e="";e="Pinless Dealer"===this.ShortCodeVerification.VerificationType?"Dealer":"Short",this.promiseFetch(this.$store.getters.fetchTimeout)(fetch(this.$store.getters.endpoint+`Verify${e}Code/`,{method:"post",body:JSON.stringify({token:this.$store.getters.token,VerificationType:this.ShortCodeVerification.VerificationType,OrganizationShortCode:this.ShortCodeVerification.OrganizationShortCode,MpesaUsername:this.ShortCodeVerification.MpesaUsername,PinlessDealerCode:this.PinlessVerification.PinlessDealerCode,OrganizationName:this.ShortCodeVerification.OrganizationName,SendOTP:!0})})).then(e=>{e.text().then(t=>{e.status>209||"Verification failed!"===JSON.parse(t).title?(this.UpdateProgressIndicator(!1,!1,!1),this.ShortCodeVerification.loading=!1,this.$refs.Alert.Alertify({visible:!0,content:JSON.parse(t).content,title:JSON.parse(t).title,icon:"mdi-progress-alert",color:"error"})):(this.MSISDN=t,this.step=2,this.UpdateProgressIndicator(!1,!1,!1),this.ShortCodeVerification.loading=!1)})})},GoLive(){this.showServeyTrigger=!1,this.successRedirect=!1;let e="",t="",r="",i=(e,t)=>{this.GoLiveProcess={OldGoLive:e,CreateMerchant:t}};this.loading=!0,i(!0,!1),this.promiseFetch(this.$store.getters.fetchTimeout)(fetch(this.$store.getters.endpoint+"GoLive/",{method:"post",body:JSON.stringify({token:this.$store.getters.token,OTP:this.OTP.value,MSISDN:this.MSISDN,OrganizationShortCode:this.ShortCodeVerification.OrganizationShortCode,OrganizationName:this.ShortCodeVerification.OrganizationName,MpesaUsername:this.ShortCodeVerification.MpesaUsername,VerificationType:this.ShortCodeVerification.VerificationType,products:this.products.selected.map(e=>e.API)})})).then(s=>{s.text().then(o=>{if(s.status>209)this.loading=!1,"Invalid OTP"==JSON.parse(o).title?this.showServeyTrigger=!1:this.showServeyTrigger=!0,this.$refs.Alert.Alertify({visible:!0,content:JSON.parse(o).content,title:JSON.parse(o).title,icon:"mdi-progress-alert",color:"error"});else{this.loading=!0;let s=!1;0!==this.products.selected.filter(e=>"Lipa Na Mpesa Production"===e.name).length&&(s=!0);let a=JSON.parse(o),n=a.InfrastructureChangeID,c=a.AppName,l=a.ServiceRequestNumber;s?(i(!1,!0),this.promiseFetch(this.$store.getters.fetchTimeout)(fetch(this.$store.getters.endpoint+"CreateMerchant/",{method:"post",body:JSON.stringify({token:this.$store.getters.token,OrganizationShortCode:this.ShortCodeVerification.OrganizationShortCode,OrganizationName:this.ShortCodeVerification.OrganizationName,MSISDN:this.MSISDN,AppName:c,MpesaUsername:this.ShortCodeVerification.MpesaUsername,ServiceRequestNumber:l,InfrastructureChangeID:n,PRODUCT:"Lipa Na Mpesa Production"})})).then(s=>{s.text().then(o=>{s.status>209||"failed"===JSON.parse(o).status?(i(!1,!1),this.loading=!1,this.showServeyTrigger=!0,this.successRedirect=!1,this.Alert({task:"show",content:JSON.parse(o).content,title:JSON.parse(o).title})):(i(!1,!0),this.loading=!1,this.showServeyTrigger=!0,this.successRedirect=!0,t="primary",e="Congratulations!",r="You have successfully applied for Production APIs access. : "+n+". Please check email for Production API URLs against your selected products. Select your company in the dropdown menu in MY APPS to see the production App.",this.Confirm({task:"show",operation:"live",color:t,icon:"mdi-check-decagram",content:r,title:e}))})})):s||(this.loading=!1,i(!1,!1),"failed"===JSON.parse(o).status?(t="error",e=JSON.parse(o).title,r=JSON.parse(o).content):(t="primary",e="Congratulations!",r="You have successfully applied for Production APIs access. : "+n+". Please check email for Production API URLs against your selected products. Select your company in the dropdown menu in MY APPS to see the production App.",this.loading=!1,i(!1,!1)),this.showServeyTrigger=!0,this.successRedirect=!0,this.Confirm({task:"show",operation:"live",color:t,icon:"mdi-check-decagram",title:e,content:r}))}})}).catch(()=>{this.$refs.Alert.Alertify({visible:!0,content:this.$store.getters.fetchTimeoutError,title:"Connection Timeout",icon:"mdi-wifi-strength-1-alert",color:"error"})}).finally(()=>{this.loading=!1,i(!1,!1)})},ResendOTP(){this.OTP.loading=!0,this.promiseFetch(this.$store.getters.fetchTimeout)(fetch(this.$store.getters.endpoint+"VerifyShortCode/",{method:"post",body:JSON.stringify({token:this.$store.getters.token,OrganizationShortCode:this.ShortCodeVerification.OrganizationShortCode,MpesaUsername:this.ShortCodeVerification.MpesaUsername,SendOTP:!0})})).then(e=>{e.text().then(t=>{e.status>209&&this.$refs.Alert.Alertify({visible:!0,content:t,title:"Generate Error",icon:"mdi-alert",color:"error"}),this.OTP.value=""})}).catch(()=>{this.$refs.Alert.Alertify({visible:!0,content:this.$store.getters.fetchTimeoutError,title:"Connection Timeout",icon:"mdi-wifi-strength-1-alert",color:"error"})}).finally(()=>{this.OTP.loading=!1})},serveySubmitted(e){e&&(this.checkNPSEligibility(this.serviceName),this.showServeyTrigger=!1,this.showServey=!1,this.successRedirect&&(this.successRedirect=!1,this.$router.push("MyApps")))}}},u=d,h=(r("d87f"),r("2877")),p=Object(h["a"])(u,i,s,!1,null,null,null);t["default"]=p.exports},"68df":function(e,t,r){"use strict";var i=r("dc19"),s=r("8e16"),o=r("384f"),a=r("7f65");e.exports=function(e){var t=i(this),r=a(e);return!(s(t)>r.size)&&!1!==o(t,(function(e){if(!r.includes(e))return!1}),!0)}},"72c3":function(e,t,r){"use strict";var i=r("23e7"),s=r("e9bc"),o=r("dad2");i({target:"Set",proto:!0,real:!0,forced:!o("union")},{union:s})},"79a4":function(e,t,r){"use strict";var i=r("23e7"),s=r("d039"),o=r("953b"),a=r("dad2"),n=!a("intersection")||s((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));i({target:"Set",proto:!0,real:!0,forced:n},{intersection:o})},"7f65":function(e,t,r){"use strict";var i=r("59ed"),s=r("825a"),o=r("c65b"),a=r("5926"),n=r("46c4"),c="Invalid size",l=RangeError,d=TypeError,u=Math.max,h=function(e,t){this.set=e,this.size=u(t,0),this.has=i(e.has),this.keys=i(e.keys)};h.prototype={getIterator:function(){return n(s(o(this.keys,this.set)))},includes:function(e){return o(this.has,this.set,e)}},e.exports=function(e){s(e);var t=+e.size;if(t!==t)throw new d(c);var r=a(t);if(r<0)throw new l(c);return new h(e,r)}},"83b9":function(e,t,r){"use strict";var i=r("cb27"),s=r("384f"),o=i.Set,a=i.add;e.exports=function(e){var t=new o;return s(e,(function(e){a(t,e)})),t}},"8b00":function(e,t,r){"use strict";var i=r("23e7"),s=r("68df"),o=r("dad2");i({target:"Set",proto:!0,real:!0,forced:!o("isSubsetOf")},{isSubsetOf:s})},"8e16":function(e,t,r){"use strict";var i=r("7282"),s=r("cb27");e.exports=i(s.proto,"size","get")||function(e){return e.size}},9392:function(e,t,r){"use strict";r("e79d")},"953b":function(e,t,r){"use strict";var i=r("dc19"),s=r("cb27"),o=r("8e16"),a=r("7f65"),n=r("384f"),c=r("5388"),l=s.Set,d=s.add,u=s.has;e.exports=function(e){var t=i(this),r=a(e),s=new l;return o(t)>r.size?c(r.getIterator(),(function(e){u(t,e)&&d(s,e)})):n(t,(function(e){r.includes(e)&&d(s,e)})),s}},9961:function(e,t,r){"use strict";var i=r("dc19"),s=r("cb27"),o=r("83b9"),a=r("7f65"),n=r("5388"),c=s.add,l=s.has,d=s.remove;e.exports=function(e){var t=i(this),r=a(e).getIterator(),s=o(t);return n(r,(function(e){l(t,e)?d(s,e):c(s,e)})),s}},a4e7:function(e,t,r){"use strict";var i=r("23e7"),s=r("395e"),o=r("dad2");i({target:"Set",proto:!0,real:!0,forced:!o("isSupersetOf")},{isSupersetOf:s})},a5f7:function(e,t,r){"use strict";var i=r("dc19"),s=r("cb27"),o=r("83b9"),a=r("8e16"),n=r("7f65"),c=r("384f"),l=r("5388"),d=s.has,u=s.remove;e.exports=function(e){var t=i(this),r=n(e),s=o(t);return a(t)<=r.size?c(t,(function(e){r.includes(e)&&u(s,e)})):l(r.getIterator(),(function(e){d(t,e)&&u(s,e)})),s}},b4bc:function(e,t,r){"use strict";var i=r("dc19"),s=r("cb27").has,o=r("8e16"),a=r("7f65"),n=r("384f"),c=r("5388"),l=r("2a62");e.exports=function(e){var t=i(this),r=a(e);if(o(t)<=r.size)return!1!==n(t,(function(e){if(r.includes(e))return!1}),!0);var d=r.getIterator();return!1!==c(d,(function(e){if(s(t,e))return l(d,"normal",!1)}))}},c1a1:function(e,t,r){"use strict";var i=r("23e7"),s=r("b4bc"),o=r("dad2");i({target:"Set",proto:!0,real:!0,forced:!o("isDisjointFrom")},{isDisjointFrom:s})},cb27:function(e,t,r){"use strict";var i=r("e330"),s=Set.prototype;e.exports={Set:Set,add:i(s.add),has:i(s.has),remove:i(s["delete"]),proto:s}},d87f:function(e,t,r){"use strict";r("02a6")},dad2:function(e,t,r){"use strict";var i=r("d066"),s=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};e.exports=function(e){var t=i("Set");try{(new t)[e](s(0));try{return(new t)[e](s(-1)),!1}catch(r){return!0}}catch(o){return!1}}},dc19:function(e,t,r){"use strict";var i=r("cb27").has;e.exports=function(e){return i(e),e}},e79d:function(e,t,r){},e9bc:function(e,t,r){"use strict";var i=r("dc19"),s=r("cb27").add,o=r("83b9"),a=r("7f65"),n=r("5388");e.exports=function(e){var t=i(this),r=a(e).getIterator(),c=o(t);return n(r,(function(e){s(c,e)})),c}}}]);